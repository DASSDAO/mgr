(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["97b22a3c"],{"24c9":function(t,o,e){"use strict";var s=e("7dd7"),a=e.n(s);a.a},5875:function(t,o,e){"use strict";e.r(o);var s=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"smitad-page"},[e("TitleBar",{attrs:{titleTx:t.title}}),e("div",{staticClass:"smitad-block"},[e("span",[t._v("请选择币种：")]),e("div",{staticClass:"radiogroup"},[e("q-radio",{attrs:{val:"CMAT",color:"secondary",label:"CMAT"},model:{value:t.type,callback:function(o){t.type=o},expression:"type"}}),e("q-radio",{staticStyle:{"margin-left":"10px"},attrs:{val:"ETH",color:"amber",label:"ETH"},model:{value:t.type,callback:function(o){t.type=o},expression:"type"}})],1),e("q-input",{attrs:{"float-label":"转出地址"},model:{value:t.toAddress,callback:function(o){t.toAddress=o},expression:"toAddress"}}),e("q-input",{attrs:{"float-label":"转出金额"},model:{value:t.toAmount,callback:function(o){t.toAmount=o},expression:"toAmount"}}),e("q-input",{attrs:{"float-label":"备注"},model:{value:t.remark,callback:function(o){t.remark=o},expression:"remark"}})],1),e("q-btn",{staticClass:"btn-next",attrs:{rounded:"",label:t.$t("submit"),color:"primary"},on:{click:t.submit}})],1)},a=[];s._withStripped=!0;e("6b54");var n=e("9bfb"),i=e("e7ea"),l=e("a002"),r=e.n(l),c=e("96a1"),u=e("3452"),d={components:{TitleBar:n["a"]},data:function(){return{title:"发起多签",type:"CMAT",toAddress:"",toAmount:"",remark:""}},mounted:function(){},methods:{submit:function(){this.showPswdInputDialog()},showPswdInputDialog:function(){var t=this;this.$q.dialog({title:this.itmeName1,message:this.$t("enterpswd"),prompt:{model:"",type:"text"},ok:this.$t("ok"),cancel:this.$t("cancel"),color:"secondary"}).then(function(o){""===o?toast(t.$t("pswdnull")):(t.$q.loading.show({message:t.$t("txsubmiting"),spinnerSize:50}),r.a.getItem("cryptMnemonic").then(function(e){null===e?(t.$q.loading.hide(),toast(t.$t("toastnowallet")),t.$router.push("/walletfirst")):t.unlockWallet(e,o)}).catch(function(t){toast(t)}))}).catch(function(){})},unlockWallet:function(t,o){var e=this;try{var s=u.AES.decrypt(t,o),a=s.toString(u.enc.Utf8),n=i["ethers"].Wallet.fromMnemonic(a),l=n.connect(this.global.defaultProvider);this.doSubmit(l)}catch(t){console.error(t),toast(e.$t("passworderror")),this.$q.loading.hide()}},doSubmit:function(t){var o=this,e=this.global.cmatmgr.contract.connect(t),s="0xA923e6992ffE1323CBfCC5903482a271741f09ff",a=this.toAddress,n=i["ethers"].utils.parseEther(this.toAmount);"ETH"===this.type?e.submitTransETH(a,n).then(function(t){console.log(t),o.$q.loading.hide(),o.addbmobLog(t.hash),o.showInfoDialog(o.$t("submitted"),t.hash),o.listen4InvestResult(t.hash,"提交成功","提交失败")}).catch(function(t){o.global.reprotError2Bmob(o,"submitTransERC20",t),o.$q.loading.hide()}):e.submitTransERC20(s,a,n).then(function(t){console.log(t),o.$q.loading.hide(),o.addbmobLog(t.hash),o.showInfoDialog(o.$t("submitted"),t.hash),o.listen4InvestResult(t.hash,"提交成功","提交失败")}).catch(function(t){o.global.reprotError2Bmob(o,"submitTransERC20",t),o.$q.loading.hide()})},listen4InvestResult:function(t,o,e){this.global.defaultProvider.once(t,function(t){console.log("----Transaction Minded:----"),console.log(t),1===t.status?toast(o):toast(e)})},showInfoDialog:function(t,o){var e=this;this.$q.dialog({title:t,message:"",ok:e.$t("viewresults"),cancel:e.$t("close")}).then(function(){e.$router.go(-1),Object(c["a"])(e.global.etherscanio+"tx/"+o)}).catch(function(){e.$router.go(-1)})},addbmobLog:function(t){this.$axios.post(this.global.BmobRestAPIUrl+"classes/mgrapplylog",{type:this.type,remark:this.remark,applyer:this.global.wallet.ethAddress,transactionHash:t,toAddress:this.toAddress,toAmount:this.toAmount},{headers:this.global.BmobRestAPIHeaders}).then(function(t){console.log(t)})}}},h=d,m=(e("24c9"),e("2877")),f=Object(m["a"])(h,s,a,!1,null,"e9849072",null);f.options.__file="SumitTransaction.vue";o["default"]=f.exports},"7dd7":function(t,o,e){},"9bfb":function(t,o,e){"use strict";var s=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"title-bar"},[e("q-icon",{staticClass:"title-back-icon",attrs:{name:"navigate_before"},nativeOn:{click:function(o){return t.goBack(o)}}}),e("div",{staticClass:"title-tx"},[t._v(t._s(t.titleTx))])],1)},a=[];s._withStripped=!0;var n={props:["titleTx"],methods:{goBack:function(){this.$router.go(-1)}}},i=n,l=(e("a675"),e("2877")),r=Object(l["a"])(i,s,a,!1,null,null,null);r.options.__file="TitleBar.vue";o["a"]=r.exports},a675:function(t,o,e){"use strict";var s=e("ca51"),a=e.n(s);a.a},ca51:function(t,o,e){}}]);